async function includeHTML(){const elements=document.querySelectorAll("[data-include]");for(const el of elements){const file=el.getAttribute("data-include");const response=await fetch(file);const html=await response.text();const temp=document.createElement('div');temp.innerHTML=html;if(file.includes("header.html")){const nav=temp.querySelector('nav');const mobile=temp.querySelector('#mobileMenu');const stylesAndLinks=temp.querySelectorAll('style, link[rel="stylesheet"]');const headerSelectors=['nav','mobile-menu','nav-link','#mobileMenu','#searchDropdown','#languageDropdown','.mobile-item','.theme-toggle-btn','.search-dropdown'];stylesAndLinks.forEach(s=>{try{if(s.tagName==='LINK'){const href=s.getAttribute('href')||s.href||'';const skipHref=/fonts.googleapis.com|tailwindcss.com|cdnjs.cloudflare.com\/ajax\/libs\/font-awesome/i;if(skipHref.test(href))return;if(!document.head.querySelector(`link[href="${href}"]`)){document.head.appendChild(s.cloneNode(!0))}}else{const text=s.textContent||'';const matchesHeader=headerSelectors.some(sel=>text.indexOf(sel)!==-1);if(matchesHeader)document.head.appendChild(s.cloneNode(!0));}}catch(err){console.warn('Could not move style/link to head',err)}});el.innerHTML=(nav?nav.outerHTML:'')+(mobile?mobile.outerHTML:'')}else if(file.includes("footer.html")){const footer=temp.querySelector('footer');const stylesAndLinks=temp.querySelectorAll('style, link[rel="stylesheet"]');stylesAndLinks.forEach(s=>{try{if(s.tagName==='LINK'){const href=s.getAttribute('href')||s.href||'';if(!href)return;if(!document.head.querySelector(`link[href="${href}"]`)){document.head.appendChild(s.cloneNode(!0))}}else{const text=s.textContent||'';const existing=Array.from(document.querySelectorAll('style[data-footer-style="true"]')).some(styleEl=>styleEl.textContent===text);if(!existing){const clone=s.cloneNode(!0);clone.setAttribute('data-footer-style','true');document.head.appendChild(clone)}}}catch(err){console.warn('Could not move footer style/link to head',err)}});el.innerHTML=footer?footer.outerHTML:html}else{el.innerHTML=html}
try{const scripts=temp.querySelectorAll('script');scripts.forEach(s=>{if(s.src){const src=s.getAttribute('src')||s.src||'';const skipPattern=/tailwindcss.com|translate.google|translate_a\/element.js|fonts.googleapis.com|cdnjs.cloudflare.com\/ajax\/libs\/font-awesome/i;if(skipPattern.test(src))return;if(!document.querySelector(`script[src="${src}"]`)){const newScript=document.createElement('script');newScript.src=src;if(s.defer)newScript.defer=!0;document.head.appendChild(newScript)}}else{const text=s.innerHTML||'';const allowInline=/initHeaderMenu\(|populateDesktopLanguageList\(|toggleMobilePillars\(|googleTranslate\(|initFooter\(/i;if(!allowInline.test(text))return;const inline=document.createElement('script');inline.text=text;document.body.appendChild(inline)}})}catch(err){console.error('Error executing included scripts for',file,err)}
if(typeof initSearch==="function"){initSearch()}
if(file.includes("header.html")){initHeaderMenu()}}}
document.addEventListener("DOMContentLoaded",includeHTML)